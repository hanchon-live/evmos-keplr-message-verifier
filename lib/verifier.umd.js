!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ethersproject/bytes"),require("@cosmjs/launchpad"),require("@hanchon/signature-to-pubkey")):"function"==typeof define&&define.amd?define(["exports","@ethersproject/bytes","@cosmjs/launchpad","@hanchon/signature-to-pubkey"],e):e((t||self).evmosKeplrMessageVerifier={},t.bytes,t.launchpad,t.signatureToPubkey)}(this,function(t,e,r,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(t){var e={exports:{}};return function(t){!function(){var e="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var o=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=i:o&&(n=self);var a=!n.JS_SHA3_NO_COMMON_JS&&t.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),f=[4,1024,262144,67108864],c=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],p=[224,256,384,512],d=[128,256],l=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var b=function(t,e,r){return function(n){return new O(t,e,t).update(n)[r]()}},g=function(t,e,r){return function(n,i){return new O(t,e,i).update(n)[r]()}},v=function(t,e,r){return function(e,n,i,o){return _["cshake"+t].update(e,n,i,o)[r]()}},w=function(t,e,r){return function(e,n,i,o){return _["kmac"+t].update(e,n,i,o)[r]()}},A=function(t,e,r,n){for(var i=0;i<l.length;++i){var o=l[i];t[o]=e(r,n,o)}return t},k=function(t,e){var r=b(t,e,"hex");return r.create=function(){return new O(t,e,t)},r.update=function(t){return r.create().update(t)},A(r,b,t,e)},B=[{name:"keccak",padding:[1,256,65536,16777216],bits:p,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:p,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(t,e){var r=g(t,e,"hex");return r.create=function(r){return new O(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},A(r,g,t,e)}},{name:"cshake",padding:f,bits:d,createMethod:function(t,e){var r=y[t],n=v(t,0,"hex");return n.create=function(n,i,o){return i||o?new O(t,e,n).bytepad([i,o],r):_["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},A(n,v,t,e)}},{name:"kmac",padding:f,bits:d,createMethod:function(t,e){var r=y[t],n=w(t,0,"hex");return n.create=function(n,i,o){return new M(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},A(n,w,t,e)}}],_={},S=[],m=0;m<B.length;++m)for(var x=B[m],C=x.bits,j=0;j<C.length;++j){var z=x.name+"_"+C[j];if(S.push(z),_[z]=x.createMethod(C[j],x.padding),"sha3"!==x.name){var E=x.name+C[j];S.push(E),_[E]=_[z]}}function O(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function M(t,e,r){O.call(this,t,e,r)}O.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var i,o,a=this.blocks,u=this.byteCount,f=t.length,h=this.blockCount,p=0,d=this.s;p<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<h+1;++i)a[i]=0;if(r)for(i=this.start;p<f&&i<u;++p)a[i>>2]|=t[p]<<c[3&i++];else for(i=this.start;p<f&&i<u;++p)(o=t.charCodeAt(p))<128?a[i>>2]|=o<<c[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++p)),a[i>>2]|=(240|o>>18)<<c[3&i++],a[i>>2]|=(128|o>>12&63)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]);if(this.lastByteIndex=i,i>=u){for(this.start=i-u,this.block=a[h],i=0;i<h;++i)d[i]^=a[i];N(d),this.reset=!0}else this.start=i}return this},O.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},O.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var i=0;if(r)i=t.length;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?i+=1:a<2048?i+=2:a<55296||a>=57344?i+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),i+=4)}return i+=this.encode(8*i),this.update(t),i},O.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=[];return i.length=e-r%e,this.update(i),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];N(n)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,a=0,s="";a<n;){for(o=0;o<e&&a<n;++o,++a)s+=u[(t=r[o])>>4&15]+u[15&t]+u[t>>12&15]+u[t>>8&15]+u[t>>20&15]+u[t>>16&15]+u[t>>28&15]+u[t>>24&15];a%e==0&&(N(r),o=0)}return i&&(s+=u[(t=r[o])>>4&15]+u[15&t],i>1&&(s+=u[t>>12&15]+u[t>>8&15]),i>2&&(s+=u[t>>20&15]+u[t>>16&15])),s},O.prototype.buffer=O.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,a=0,s=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(t);a<n;){for(o=0;o<e&&a<n;++o,++a)u[a]=r[o];a%e==0&&N(r)}return i&&(u[o]=r[o],t=t.slice(0,s)),t},O.prototype.digest=O.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,a=0,s=0,u=[];s<i;){for(a=0;a<r&&s<i;++a,++s)u[t=s<<2]=255&(e=n[a]),u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;s%r==0&&N(n)}return o&&(u[t=s<<2]=255&(e=n[a]),o>1&&(u[t+1]=e>>8&255),o>2&&(u[t+2]=e>>16&255)),u},(M.prototype=new O).finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var N=function(t){var e,r,n,i,o,a,s,u,f,c,p,d,l,y,b,g,v,w,A,k,B,_,S,m,x,C,j,z,E,O,M,N,J,H,I,R,T,V,D,U,q,F,K,W,P,Y,$,G,L,Q,X,Z,tt,et,rt,nt,it,ot,at,st,ut,ft,ct;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],u=t[4]^t[14]^t[24]^t[34]^t[44],f=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],p=t[7]^t[17]^t[27]^t[37]^t[47],r=(l=t[9]^t[19]^t[29]^t[39]^t[49])^((s=t[3]^t[13]^t[23]^t[33]^t[43])<<1|(a=t[2]^t[12]^t[22]^t[32]^t[42])>>>31),t[0]^=e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(a<<1|s>>>31),t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,r=o^(f<<1|u>>>31),t[2]^=e=i^(u<<1|f>>>31),t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,r=s^(p<<1|c>>>31),t[4]^=e=a^(c<<1|p>>>31),t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,r=f^(l<<1|d>>>31),t[6]^=e=u^(d<<1|l>>>31),t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,r=p^(o<<1|i>>>31),t[8]^=e=c^(i<<1|o>>>31),t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,b=t[1],Y=t[11]<<4|t[10]>>>28,$=t[10]<<4|t[11]>>>28,z=t[20]<<3|t[21]>>>29,E=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,F=t[40]<<18|t[41]>>>14,K=t[41]<<18|t[40]>>>14,H=t[2]<<1|t[3]>>>31,I=t[3]<<1|t[2]>>>31,v=t[12]<<12|t[13]>>>20,G=t[22]<<10|t[23]>>>22,L=t[23]<<10|t[22]>>>22,O=t[33]<<13|t[32]>>>19,M=t[32]<<13|t[33]>>>19,ft=t[42]<<2|t[43]>>>30,ct=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,R=t[14]<<6|t[15]>>>26,T=t[15]<<6|t[14]>>>26,A=t[24]<<11|t[25]>>>21,Q=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,N=t[45]<<29|t[44]>>>3,J=t[44]<<29|t[45]>>>3,m=t[6]<<28|t[7]>>>4,x=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,V=t[26]<<25|t[27]>>>7,D=t[27]<<25|t[26]>>>7,k=t[36]<<21|t[37]>>>11,B=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,W=t[8]<<27|t[9]>>>5,P=t[9]<<27|t[8]>>>5,C=t[18]<<20|t[19]>>>12,j=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,at=t[28]<<7|t[29]>>>25,U=t[38]<<8|t[39]>>>24,q=t[39]<<8|t[38]>>>24,_=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=(y=t[0])^~(g=t[13]<<12|t[12]>>>20)&(w=t[25]<<11|t[24]>>>21),t[1]=b^~v&A,t[10]=m^~C&z,t[11]=x^~j&E,t[20]=H^~R&V,t[21]=I^~T&D,t[30]=W^~Y&G,t[31]=P^~$&L,t[40]=et^~nt&ot,t[41]=rt^~it&at,t[2]=g^~w&k,t[3]=v^~A&B,t[12]=C^~z&O,t[13]=j^~E&M,t[22]=R^~V&U,t[23]=T^~D&q,t[32]=Y^~G&Q,t[33]=$^~L&X,t[42]=nt^~ot&st,t[43]=it^~at&ut,t[4]=w^~k&_,t[5]=A^~B&S,t[14]=z^~O&N,t[15]=E^~M&J,t[24]=V^~U&F,t[25]=D^~q&K,t[34]=G^~Q&Z,t[35]=L^~X&tt,t[44]=ot^~st&ft,t[45]=at^~ut&ct,t[6]=k^~_&y,t[7]=B^~S&b,t[16]=O^~N&m,t[17]=M^~J&x,t[26]=U^~F&H,t[27]=q^~K&I,t[36]=Q^~Z&W,t[37]=X^~tt&P,t[46]=st^~ft&et,t[47]=ut^~ct&rt,t[8]=_^~y&g,t[9]=S^~b&v,t[18]=N^~m&C,t[19]=J^~x&j,t[28]=F^~H&R,t[29]=K^~I&T,t[38]=Z^~W&Y,t[39]=tt^~P&$,t[48]=ft^~et&nt,t[49]=ct^~rt&it,t[0]^=h[n],t[1]^=h[n+1]};if(a)t.exports=_;else for(m=0;m<S.length;++m)n[S[m]]=_[S[m]]}()}(e),e.exports}();t.verifyKeplrSignature=function(t,i,a,s){if(i!==s.pub_key.value)return!1;const u={chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:t,data:Buffer.from(a).toString("base64")}}],memo:""},f=r.serializeSignDoc(u),c=o.keccak_256(e.arrayify(f)),h=`0x${Buffer.from(s.signature,"base64").toString("hex")}`;return n.signatureToPubkey(h,Buffer.from(c,"hex"))===s.pub_key.value}});
//# sourceMappingURL=verifier.umd.js.map
